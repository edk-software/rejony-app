{% extends 'CantigaCoreBundle:layout:base-layout.html.twig' %}

{% block page_content %}
    {% for category in categories %}
        {% if category.questionsByLevel(level)|length > 0 %}
            <div class="row">
                <div class="col-md-12">
                    <div class="box box-solid">
                        <div class="box-header with-border">
                            <h3 class="box-title">
                                <i class="fa fa-fw fa-question-circle"></i>
                                {% if categoryRouteName is defined and slug is defined %}
                                    <a href="{{ path(categoryRouteName, {id: category.id, slug: slug}) }}">
                                        {{ category.name }}
                                    </a>
                                {% else %}
                                    {{ category.name }}
                                {% endif %}
                            </h3>
                        </div>
                        <div class="box-body">
                            <div class="box-group" id="accordion-{{ category.id }}">
                                {% for question in category.questionsByLevel(level, false) %}
                                    <div class="panel box box-primary">
                                        <div class="box-header with-border">
                                            <h4 class="box-title">
                                                <a data-toggle="collapse" data-parent="#accordion-{{ category.id }}"
                                                   href="#collapse-{{ category.id }}-{{ question.id }}"
                                                   aria-expanded="false" class="collapsed">{{ question.topic }}</a>
                                            </h4>
                                        </div>
                                        <div id="collapse-{{ category.id }}-{{ question.id }}"
                                            class="panel-collapse collapse" aria-expanded="false" style="height:0">
                                            <div class="box-body">
                                                {% if question.answer starts with '<p>' %}
                                                    {{ question.answer|raw }}
                                                {% else %}
                                                    <p>{{ question.answer|raw }}</p>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endfor %}    
{% endblock %}
