{% extends 'CantigaCoreBundle:layout:common-layout.html.twig' %}

{% block box_header %}
    <h4>{{ 'Edit request: 0' | trans([item.name]) }}</h4>
{% endblock %}

{% block box_body %}
    {{ form_start(form) }}
    <div class="row">
        <div class="col-md-6">
            <div class="col-xs-12">
                {{ form_row(form.name) }}
            </div>
            <div class="col-xs-12">
                {{ form_row(form.territory) }}
            </div>
            <div class="col-xs-12">
                <span class="help-block">{{ 'MapPinHelp' | trans([], 'public') }}</span>
                <div id="map-canvas" style="height:400px;width:100%"
					data-lat="{{ item.lat | number_format }}" data-lng="{{ item.lng | number_format }}"></div>
                <div class="col-md-6 col-xs-12 no-padding">
                    {{ form_row(form.lat) }}
                </div>
                <div class="col-md-6 col-xs-12 no-padding">
                    {{ form_row(form.lng) }}
                </div>
            </div>
        </div>
        <div class="col-md-6">
            {% include formRenderer.template with { formRenderer: formRenderer, form: form } only %}
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="{{ map.olCssUrl }}"/>
{% endblock %}

{% block javascripts_inline %}
    {{ use_icheck() }}
	<script src="{{ map.olJsUrl }}"></script>
	<script src="{{ asset('js/maps.js') }}"></script>
	<script>
		maps.renderCoordsFetcher('map-canvas', (function () {
			var container = $('#map-canvas');
			return [container.data('lng'), container.data('lat')];
		})(), jQuery('#user_area_request_form_lat'), jQuery('#user_area_request_form_lng'));
	</script>
{% endblock %}
